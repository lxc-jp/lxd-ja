(images-manage)=
# イメージを管理するには

イメージを扱う際は、利用可能なイメージについての情報を調べたりプロパティを表示・編集したり、特定のイメージを参照するエイリアスを設定したりできます。
またイメージをファイルにエクスポートすることもできます。これは他のマシンに{ref}`イメージをコピーしたりインポート <images-copy>`するのに便利です。

## 利用可能なイメージを一覧表示する

サーバ上の全てのイメージを一覧表示するには、以下のコマンドを入力します。

    lxc image list [<remote>:]

リモートを指定しない場合は、{ref}`デフォルトリモート <images-remote-default>`が使用されます。

(images-manage-filter)=
### 利用可能なイメージをフィルタする

表示される結果をフィルタするには、コマンドの後にエイリアスかフィンガープリントの一部を指定します。
例えば、全てのDebianのイメージを表示するには、以下のコマンドを入力します。

    lxc image list images: debian

複数のフィルタも指定可能です。
例えば、全ての64-bitのDebianのイメージを表示するには、以下のコマンドを入力します。

    lxc image list images: debian amd64

エイリアスとフィンガープリント以外のプロパティをフィルタするには、`<key>=<value>`形式でフィルタを指定します。
例えば以下のようにします。

    lxc image list images: debian architecture=x86_64

## イメージの情報を表示する

イメージの情報を表示するには、以下のコマンドを入力します。

    lxc image info <image_ID>

イメージのIDとしては、イメージのエイリアスかフィンガープリントを指定できます。
リモートのイメージでは、リモートサーバを忘れずに含めてください(例えば`images:ubuntu/22.04`)。

イメージのプロパティだけを表示するには、以下のコマンドを入力します。

    lxc image show <image_ID>

また、イメージの(`properties`キー配下にある)特定のプロパティは以下のコマンドで表示できます。

    lxc image get-property <image_ID> <key>

例えば、公式の Ubuntu 22.04 イメージのリリース名を表示するには、以下のコマンドを入力します。

    lxc image get-property ubuntu:22.04 release

(images-manage-edit)=
## イメージのプロパティを編集する

`properties`キー配下にあるイメージの特定のプロパティを設定するには、以下のコマンドを入力します。

    lxc image set-property <image_ID> <key>

```{note}
これらのプロパティはイメージについての情報を伝えるために使用できます。
これらはいかなる方法によってもLXDの挙動を変更はしません。
```

トップレベルのプロパティを含むイメージのプロパティ全体を編集するには、以下のコマンドを入力します。

    lxc image edit <image_ID>

## イメージのエイリアスを設定する

イメージのエイリアスを設定すると、イメージを参照するのがより容易になり便利かもしれません。というのはエイリアスを覚えるほうがフィンガープリントを覚えるより通常容易だからです。
しかし、もっとも重要なのは、エイリアスは別のイメージを指すように変更できるので、常に最新のイメージ(例えば最新のリリースバージョン)を提供するエイリアスを作れることです。

イメージ一覧の中に既存のエイリアスの例を見ることができます。
完全なリストを見るには、以下のコマンドを入力します。

    lxc image alias list

イメージを{ref}`コピーやインポート <images-copy>`または{ref}`発行 <images-create-publish>`する際には、直接イメージにエイリアスを割り当てることができます。
代わりに、以下のコマンドを入力してエイリアスを作成することもできます。

    lxc image alias create <alias_name> <image_fingerprint>

エイリアスは削除することもできます。

    lxc image alias delete <alias_name>

エイリアスをリネームするには、以下のコマンドを入力します。

    lxc image alias rename <alias_name> <new_alias_name>

エイリアスの名前を維持したまま、別の(例えば、より新しいバージョンの)イメージにエイリアスを向けたい場合は、既存のエイリアスを削除して新しいエイリアスを作成する必要があります。

(images-manage-export)=
## イメージをファイルにエクスポートする

イメージはローカルサーバかリモートのLXDサーバのイメージストアに保管されます。
ですが、イメージをファイルにエクスポートすることができます。
この方法はイメージファイルをバックアップしたり、エアギャップされた(訳注:セキュリティを高めるために外部ネットワークから遮断された)環境にイメージを持っていくのに便利です。

コンテナイメージをファイルにエクスポートするには、以下のコマンドを入力します。

    lxc image export [<remote>:]<image> [<output_directory_path>]

仮想マシンイメージをファイルにエクスポートするには、`--vm`フラグを追加します。

    lxc image export [<remote>:]<image> [<output_directory_path>] --vm

イメージに使用されるファイル構造の説明については{ref}`image-format`を参照してください。
